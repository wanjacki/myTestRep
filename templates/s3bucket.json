{
    "Resources": {
        "HelloHandlerServiceRole11EF7C63": {
            "Type": "AWS::IAM::Role",
            "Properties": {
                "AssumeRolePolicyDocument": {
                    "Statement": [
                        {
                            "Action": "sts:AssumeRole",
                            "Effect": "Allow",
                            "Principal": {
                                "Service": "lambda.amazonaws.com"
                            }
                        }
                    ],
                    "Version": "2012-10-17"
                },
                "ManagedPolicyArns": [
                    {
                        "Fn::Join": [
                            "",
                            [
                                "arn:",
                                {
                                    "Ref": "AWS::Partition"
                                },
                                ":iam::aws:policy/service-role/AWSLambdaBasicExecutionRole"
                            ]
                        ]
                    }
                ]
            },
            "Metadata": {
                "aws:cdk:path": "HelloServerlessStack/HelloServerlessProduct/HelloHandler/ServiceRole/Resource"
            }
        },
        "HelloHandler2E4FBA4D": {
            "Type": "AWS::Lambda::Function",
            "Properties": {
                "Code": {
                    "ZipFile": "\n        exports.handler = async function(event) {\n          console.log(\"request:\", JSON.stringify(event, undefined, 2));\n          return {\n            statusCode: 200,\n            headers: { \"Content-Type\": \"text/plain\" },\n            body: `Hello, CDK! You've hit ${event.path}\\n`\n          };\n        };\n      "
                },
                "Role": {
                    "Fn::GetAtt": [
                        "HelloHandlerServiceRole11EF7C63",
                        "Arn"
                    ]
                },
                "Handler": "index.handler",
                "Runtime": "nodejs14.x"
            },
            "DependsOn": [
                "HelloHandlerServiceRole11EF7C63"
            ],
            "Metadata": {
                "aws:cdk:path": "HelloServerlessStack/HelloServerlessProduct/HelloHandler/Resource"
            }
        },
        "HelloEndpointDB6339C6": {
            "Type": "AWS::ApiGateway::RestApi",
            "Properties": {
                "Name": "HelloEndpoint"
            },
            "Metadata": {
                "aws:cdk:path": "HelloServerlessStack/HelloServerlessProduct/HelloEndpoint/Resource"
            }
        },
        "HelloEndpointCloudWatchRole338F94E5": {
            "Type": "AWS::IAM::Role",
            "Properties": {
                "AssumeRolePolicyDocument": {
                    "Statement": [
                        {
                            "Action": "sts:AssumeRole",
                            "Effect": "Allow",
                            "Principal": {
                                "Service": "apigateway.amazonaws.com"
                            }
                        }
                    ],
                    "Version": "2012-10-17"
                },
                "ManagedPolicyArns": [
                    {
                        "Fn::Join": [
                            "",
                            [
                                "arn:",
                                {
                                    "Ref": "AWS::Partition"
                                },
                                ":iam::aws:policy/service-role/AmazonAPIGatewayPushToCloudWatchLogs"
                            ]
                        ]
                    }
                ]
            },
            "Metadata": {
                "aws:cdk:path": "HelloServerlessStack/HelloServerlessProduct/HelloEndpoint/CloudWatchRole/Resource"
            }
        },
        "HelloEndpointAccount5C50D287": {
            "Type": "AWS::ApiGateway::Account",
            "Properties": {
                "CloudWatchRoleArn": {
                    "Fn::GetAtt": [
                        "HelloEndpointCloudWatchRole338F94E5",
                        "Arn"
                    ]
                }
            },
            "DependsOn": [
                "HelloEndpointDB6339C6"
            ],
            "Metadata": {
                "aws:cdk:path": "HelloServerlessStack/HelloServerlessProduct/HelloEndpoint/Account"
            }
        },
        "HelloEndpointDeploymentC454D4F1c3bc49b109b6d23fc2a62df8935ff2d1": {
            "Type": "AWS::ApiGateway::Deployment",
            "Properties": {
                "RestApiId": {
                    "Ref": "HelloEndpointDB6339C6"
                },
                "Description": "Automatically created by the RestApi construct"
            },
            "DependsOn": [
                "HelloEndpointproxyANY86F07935",
                "HelloEndpointproxy8620F60B",
                "HelloEndpointANY3E4DEFAC"
            ],
            "Metadata": {
                "aws:cdk:path": "HelloServerlessStack/HelloServerlessProduct/HelloEndpoint/Deployment/Resource"
            }
        },
        "HelloEndpointDeploymentStageprod3D2B4BB5": {
            "Type": "AWS::ApiGateway::Stage",
            "Properties": {
                "RestApiId": {
                    "Ref": "HelloEndpointDB6339C6"
                },
                "DeploymentId": {
                    "Ref": "HelloEndpointDeploymentC454D4F1c3bc49b109b6d23fc2a62df8935ff2d1"
                },
                "StageName": "prod"
            },
            "DependsOn": [
                "HelloEndpointAccount5C50D287"
            ],
            "Metadata": {
                "aws:cdk:path": "HelloServerlessStack/HelloServerlessProduct/HelloEndpoint/DeploymentStage.prod/Resource"
            }
        },
        "HelloEndpointproxy8620F60B": {
            "Type": "AWS::ApiGateway::Resource",
            "Properties": {
                "ParentId": {
                    "Fn::GetAtt": [
                        "HelloEndpointDB6339C6",
                        "RootResourceId"
                    ]
                },
                "PathPart": "{proxy+}",
                "RestApiId": {
                    "Ref": "HelloEndpointDB6339C6"
                }
            },
            "Metadata": {
                "aws:cdk:path": "HelloServerlessStack/HelloServerlessProduct/HelloEndpoint/Default/{proxy+}/Resource"
            }
        },
        "HelloEndpointproxyANYApiPermissionHelloServerlessStackHelloServerlessProductHelloEndpointFA24A628ANYproxyE174C26F": {
            "Type": "AWS::Lambda::Permission",
            "Properties": {
                "Action": "lambda:InvokeFunction",
                "FunctionName": {
                    "Fn::GetAtt": [
                        "HelloHandler2E4FBA4D",
                        "Arn"
                    ]
                },
                "Principal": "apigateway.amazonaws.com",
                "SourceArn": {
                    "Fn::Join": [
                        "",
                        [
                            "arn:",
                            {
                                "Ref": "AWS::Partition"
                            },
                            ":execute-api:",
                            {
                                "Ref": "AWS::Region"
                            },
                            ":",
                            {
                                "Ref": "AWS::AccountId"
                            },
                            ":",
                            {
                                "Ref": "HelloEndpointDB6339C6"
                            },
                            "/",
                            {
                                "Ref": "HelloEndpointDeploymentStageprod3D2B4BB5"
                            },
                            "/*/*"
                        ]
                    ]
                }
            },
            "Metadata": {
                "aws:cdk:path": "HelloServerlessStack/HelloServerlessProduct/HelloEndpoint/Default/{proxy+}/ANY/ApiPermission.HelloServerlessStackHelloServerlessProductHelloEndpointFA24A628.ANY..{proxy+}"
            }
        },
        "HelloEndpointproxyANYApiPermissionTestHelloServerlessStackHelloServerlessProductHelloEndpointFA24A628ANYproxy82DFD6E0": {
            "Type": "AWS::Lambda::Permission",
            "Properties": {
                "Action": "lambda:InvokeFunction",
                "FunctionName": {
                    "Fn::GetAtt": [
                        "HelloHandler2E4FBA4D",
                        "Arn"
                    ]
                },
                "Principal": "apigateway.amazonaws.com",
                "SourceArn": {
                    "Fn::Join": [
                        "",
                        [
                            "arn:",
                            {
                                "Ref": "AWS::Partition"
                            },
                            ":execute-api:",
                            {
                                "Ref": "AWS::Region"
                            },
                            ":",
                            {
                                "Ref": "AWS::AccountId"
                            },
                            ":",
                            {
                                "Ref": "HelloEndpointDB6339C6"
                            },
                            "/test-invoke-stage/*/*"
                        ]
                    ]
                }
            },
            "Metadata": {
                "aws:cdk:path": "HelloServerlessStack/HelloServerlessProduct/HelloEndpoint/Default/{proxy+}/ANY/ApiPermission.Test.HelloServerlessStackHelloServerlessProductHelloEndpointFA24A628.ANY..{proxy+}"
            }
        },
        "HelloEndpointproxyANY86F07935": {
            "Type": "AWS::ApiGateway::Method",
            "Properties": {
                "HttpMethod": "ANY",
                "ResourceId": {
                    "Ref": "HelloEndpointproxy8620F60B"
                },
                "RestApiId": {
                    "Ref": "HelloEndpointDB6339C6"
                },
                "AuthorizationType": "NONE",
                "Integration": {
                    "IntegrationHttpMethod": "POST",
                    "Type": "AWS_PROXY",
                    "Uri": {
                        "Fn::Join": [
                            "",
                            [
                                "arn:",
                                {
                                    "Ref": "AWS::Partition"
                                },
                                ":apigateway:",
                                {
                                    "Ref": "AWS::Region"
                                },
                                ":lambda:path/2015-03-31/functions/",
                                {
                                    "Fn::GetAtt": [
                                        "HelloHandler2E4FBA4D",
                                        "Arn"
                                    ]
                                },
                                "/invocations"
                            ]
                        ]
                    }
                }
            },
            "Metadata": {
                "aws:cdk:path": "HelloServerlessStack/HelloServerlessProduct/HelloEndpoint/Default/{proxy+}/ANY/Resource"
            }
        },
        "HelloEndpointANYApiPermissionHelloServerlessStackHelloServerlessProductHelloEndpointFA24A628ANY4D19C5F2": {
            "Type": "AWS::Lambda::Permission",
            "Properties": {
                "Action": "lambda:InvokeFunction",
                "FunctionName": {
                    "Fn::GetAtt": [
                        "HelloHandler2E4FBA4D",
                        "Arn"
                    ]
                },
                "Principal": "apigateway.amazonaws.com",
                "SourceArn": {
                    "Fn::Join": [
                        "",
                        [
                            "arn:",
                            {
                                "Ref": "AWS::Partition"
                            },
                            ":execute-api:",
                            {
                                "Ref": "AWS::Region"
                            },
                            ":",
                            {
                                "Ref": "AWS::AccountId"
                            },
                            ":",
                            {
                                "Ref": "HelloEndpointDB6339C6"
                            },
                            "/",
                            {
                                "Ref": "HelloEndpointDeploymentStageprod3D2B4BB5"
                            },
                            "/*/"
                        ]
                    ]
                }
            },
            "Metadata": {
                "aws:cdk:path": "HelloServerlessStack/HelloServerlessProduct/HelloEndpoint/Default/ANY/ApiPermission.HelloServerlessStackHelloServerlessProductHelloEndpointFA24A628.ANY.."
            }
        },
        "HelloEndpointANYApiPermissionTestHelloServerlessStackHelloServerlessProductHelloEndpointFA24A628ANYB04D0EB5": {
            "Type": "AWS::Lambda::Permission",
            "Properties": {
                "Action": "lambda:InvokeFunction",
                "FunctionName": {
                    "Fn::GetAtt": [
                        "HelloHandler2E4FBA4D",
                        "Arn"
                    ]
                },
                "Principal": "apigateway.amazonaws.com",
                "SourceArn": {
                    "Fn::Join": [
                        "",
                        [
                            "arn:",
                            {
                                "Ref": "AWS::Partition"
                            },
                            ":execute-api:",
                            {
                                "Ref": "AWS::Region"
                            },
                            ":",
                            {
                                "Ref": "AWS::AccountId"
                            },
                            ":",
                            {
                                "Ref": "HelloEndpointDB6339C6"
                            },
                            "/test-invoke-stage/*/"
                        ]
                    ]
                }
            },
            "Metadata": {
                "aws:cdk:path": "HelloServerlessStack/HelloServerlessProduct/HelloEndpoint/Default/ANY/ApiPermission.Test.HelloServerlessStackHelloServerlessProductHelloEndpointFA24A628.ANY.."
            }
        },
        "HelloEndpointANY3E4DEFAC": {
            "Type": "AWS::ApiGateway::Method",
            "Properties": {
                "HttpMethod": "ANY",
                "ResourceId": {
                    "Fn::GetAtt": [
                        "HelloEndpointDB6339C6",
                        "RootResourceId"
                    ]
                },
                "RestApiId": {
                    "Ref": "HelloEndpointDB6339C6"
                },
                "AuthorizationType": "NONE",
                "Integration": {
                    "IntegrationHttpMethod": "POST",
                    "Type": "AWS_PROXY",
                    "Uri": {
                        "Fn::Join": [
                            "",
                            [
                                "arn:",
                                {
                                    "Ref": "AWS::Partition"
                                },
                                ":apigateway:",
                                {
                                    "Ref": "AWS::Region"
                                },
                                ":lambda:path/2015-03-31/functions/",
                                {
                                    "Fn::GetAtt": [
                                        "HelloHandler2E4FBA4D",
                                        "Arn"
                                    ]
                                },
                                "/invocations"
                            ]
                        ]
                    }
                }
            },
            "Metadata": {
                "aws:cdk:path": "HelloServerlessStack/HelloServerlessProduct/HelloEndpoint/Default/ANY/Resource"
            }
        },
        "CDKMetadata": {
            "Type": "AWS::CDK::Metadata",
            "Properties": {
                "Analytics": "v2:deflate64:H4sIAAAAAAAA/8vLT0nVyyrWLzO00DPSM1DMKs7M1C0qzSvJzE3VC4LQAOVhUuQkAAAA"
            },
            "Metadata": {
                "aws:cdk:path": "HelloServerlessStack/HelloServerlessProduct/CDKMetadata/Default"
            },
            "Condition": "CDKMetadataAvailable"
        }
    },
    "Outputs": {
        "HelloEndpointB03699DE": {
            "Value": {
                "Fn::Join": [
                    "",
                    [
                        "https://",
                        {
                            "Ref": "HelloEndpointDB6339C6"
                        },
                        ".execute-api.",
                        {
                            "Ref": "AWS::Region"
                        },
                        ".",
                        {
                            "Ref": "AWS::URLSuffix"
                        },
                        "/",
                        {
                            "Ref": "HelloEndpointDeploymentStageprod3D2B4BB5"
                        },
                        "/"
                    ]
                ]
            }
        }
    },
    "Conditions": {
        "CDKMetadataAvailable": {
            "Fn::Or": [
                {
                    "Fn::Or": [
                        {
                            "Fn::Equals": [
                                {
                                    "Ref": "AWS::Region"
                                },
                                "af-south-1"
                            ]
                        },
                        {
                            "Fn::Equals": [
                                {
                                    "Ref": "AWS::Region"
                                },
                                "ap-east-1"
                            ]
                        },
                        {
                            "Fn::Equals": [
                                {
                                    "Ref": "AWS::Region"
                                },
                                "ap-northeast-1"
                            ]
                        },
                        {
                            "Fn::Equals": [
                                {
                                    "Ref": "AWS::Region"
                                },
                                "ap-northeast-2"
                            ]
                        },
                        {
                            "Fn::Equals": [
                                {
                                    "Ref": "AWS::Region"
                                },
                                "ap-south-1"
                            ]
                        },
                        {
                            "Fn::Equals": [
                                {
                                    "Ref": "AWS::Region"
                                },
                                "ap-southeast-1"
                            ]
                        },
                        {
                            "Fn::Equals": [
                                {
                                    "Ref": "AWS::Region"
                                },
                                "ap-southeast-2"
                            ]
                        },
                        {
                            "Fn::Equals": [
                                {
                                    "Ref": "AWS::Region"
                                },
                                "ca-central-1"
                            ]
                        },
                        {
                            "Fn::Equals": [
                                {
                                    "Ref": "AWS::Region"
                                },
                                "cn-north-1"
                            ]
                        },
                        {
                            "Fn::Equals": [
                                {
                                    "Ref": "AWS::Region"
                                },
                                "cn-northwest-1"
                            ]
                        }
                    ]
                },
                {
                    "Fn::Or": [
                        {
                            "Fn::Equals": [
                                {
                                    "Ref": "AWS::Region"
                                },
                                "eu-central-1"
                            ]
                        },
                        {
                            "Fn::Equals": [
                                {
                                    "Ref": "AWS::Region"
                                },
                                "eu-north-1"
                            ]
                        },
                        {
                            "Fn::Equals": [
                                {
                                    "Ref": "AWS::Region"
                                },
                                "eu-south-1"
                            ]
                        },
                        {
                            "Fn::Equals": [
                                {
                                    "Ref": "AWS::Region"
                                },
                                "eu-west-1"
                            ]
                        },
                        {
                            "Fn::Equals": [
                                {
                                    "Ref": "AWS::Region"
                                },
                                "eu-west-2"
                            ]
                        },
                        {
                            "Fn::Equals": [
                                {
                                    "Ref": "AWS::Region"
                                },
                                "eu-west-3"
                            ]
                        },
                        {
                            "Fn::Equals": [
                                {
                                    "Ref": "AWS::Region"
                                },
                                "me-south-1"
                            ]
                        },
                        {
                            "Fn::Equals": [
                                {
                                    "Ref": "AWS::Region"
                                },
                                "sa-east-1"
                            ]
                        },
                        {
                            "Fn::Equals": [
                                {
                                    "Ref": "AWS::Region"
                                },
                                "us-east-1"
                            ]
                        },
                        {
                            "Fn::Equals": [
                                {
                                    "Ref": "AWS::Region"
                                },
                                "us-east-2"
                            ]
                        }
                    ]
                },
                {
                    "Fn::Or": [
                        {
                            "Fn::Equals": [
                                {
                                    "Ref": "AWS::Region"
                                },
                                "us-west-1"
                            ]
                        },
                        {
                            "Fn::Equals": [
                                {
                                    "Ref": "AWS::Region"
                                },
                                "us-west-2"
                            ]
                        }
                    ]
                }
            ]
        }
    }
}
